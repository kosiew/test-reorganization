var posts=[{id:1,date:"2016-01-09T22:05:09",modified:"2016-01-09T22:05:09",slug:"hello-world",type:"post",title:"Hello world!",content:"Welcome to WordPress. This is your first post. Edit or delete it, then start writing!"},{id:2,date:"2016-01-10T22:05:09",modified:"2016-01-10T22:05:09",slug:"learning-javascript",type:"post",title:"Learning JavaScript!",content:"I'm learning JavaScript and super excited!!!"},{id:3,date:"2016-01-11T22:05:09",modified:"2016-01-11T22:05:09",slug:"rest-api",type:"post",title:"The REST API!",content:"I've started working with the REST API in WordPress, what fun!"},{id:4,date:"2016-01-12T22:05:09",modified:"2016-01-12T22:05:09",slug:"json-data",type:"post",title:"JSON Data!",content:"So, with the REST API it is posible to pull in WordPress data as pure JSON.  Now I'm figuring out what to do with the data"},{id:5,date:"2016-01-13T22:05:09",modified:"2016-01-13T22:05:09",slug:"javascript-project",type:"post",title:"JavaScript Project",content:"I've started working with the REST API in WordPress, what fun!"}],pages=[{id:6,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"home",type:"page",title:"Home",content:"Welcome to VanillaPress, my JavaScript site!"},{id:7,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"about",type:"page",title:"About",content:"A little about me!"},{id:8,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"blog",type:"page",title:"Blog",content:"Please enjoy my posts"},{id:9,date:"2016-01-18T22:05:09",modified:"2016-01-18T22:05:09",slug:"contact",type:"page",title:"Contact",content:"Drop me a line with any questions :)"}],settings={editorHidden:"true"},data={posts:posts,pages:pages,settings:settings},helpers={};helpers.createMenuItem=function(a){var b=document.createElement("li");return b.appendChild(helpers.createLink(a)),b},helpers.createLink=function(a){var b=document.createElement("a"),c=document.createTextNode(a.title);return"home"!==a.slug?b.href="#"+a.slug:b.href="#",b.appendChild(c),b},helpers.getMainMenuEl=function(){return document.querySelector("#mainNav ul")},helpers.getPageTitleEl=function(){return document.getElementById("pageTitle")},helpers.getLinks=function(){return document.querySelectorAll("a")},helpers.getPageContentEl=function(){return document.getElementById("pageContent")},helpers.getEditorEl=function(){return document.getElementById("editor")},helpers.getEditorToggleEl=function(){return document.getElementById("editorToggle")},helpers.getEditorToggleLink=function(){return document.querySelector("#editorToggle a")},helpers.getEditorTitleEl=function(){return document.getElementById("editTitle")},helpers.getEditorContentEl=function(){return document.getElementById("editContent")},helpers.getEditorUpdateBtnEl=function(){return document.getElementById("editUpdateBtn")};var model={};model.init=function(){!1===model.checkLocalStore()&&model.updateLocalStore(data)},model.getContent=function(a){var b=model.getPost(a);return null===b&&(b=model.getPage(a)),null===b&&(b={title:"404 Error",content:"Content not found"}),b},model.getCurrentContent=function(){var a=router.getSlug(),b=model.getContent(a);return b},model.getPosts=function(){var a=model.getLocalStore().posts;return a},model.getPost=function(a){var b=model.getLocalStore().posts;for(i=0,max=b.length;i<max;i++)if(a===b[i].slug)return b[i];return null},model.getPages=function(){var a=model.getLocalStore().pages;return a},model.getPage=function(a){var b=model.getLocalStore().pages;for(null===a&&(a="home"),i=0,max=b.length;i<max;i++)if(a===b[i].slug)return b[i];return null},model.updateContent=function(a){var b=model.getLocalStore(),c=new Date;"post"===a.type&&b.posts.forEach(function(b){a.id===b.id&&(b.title=a.title,b.content=a.content,b.modified=c.toISOString())}),"page"===a.type&&b.pages.forEach(function(b){a.id===b.id&&(b.title=a.title,b.content=a.content,b.modified=c.toISOString())}),model.updateLocalStore(b)},model.updateEditorHidden=function(a){var b=model.getLocalStore();b.settings.editorHidden=a,model.updateLocalStore(b)},model.getEditorHidden=function(){var a=model.getLocalStore();return a.settings.editorHidden},model.checkLocalStore=function(){var a=model.getLocalStore();return null!==a},model.getLocalStore=function(){var a=JSON.parse(localStorage.getItem("vanillaPress"));return a},model.updateLocalStore=function(a){localStorage.setItem("vanillaPress",JSON.stringify(a))},model.removeLocalStore=function(){localStorage.removeItem("vanillaPress")};var router={};router.init=function(){router.loadContent(),router.listenPageChange()},router.getSlug=function(){return slug=window.location.hash,""===slug?null:slug.substr(1)},router.listenPageChange=function(){window.addEventListener("hashchange",router.loadContent,!1)},router.loadContent=function(){var a=router.getSlug(),b=model.getContent(a),c=helpers.getEditorEl();view.clearContent(),null===a?view.loadSingleContent("home"):"blog"===a?view.loadBlogPosts():view.loadSingleContent(a),editor.currentContent=b,!1===c.classList.contains("hidden")&&editor.loadEditForm(editor.currentContent)};var view={};view.init=function(){view.createMainMenu()},view.loadBlogPosts=function(){for(var a=model.getPosts(),b=document.createDocumentFragment(),c=helpers.getPageTitleEl(),d=helpers.getPageContentEl(),e=0,f=a.length;e<f;e++)b.appendChild(view.createPostMarkup(a[e]));d.appendChild(b),c.innerHTML="Blog Posts"},view.loadSingleContent=function(a){var b=model.getContent(a),c=helpers.getPageTitleEl(),d=helpers.getPageContentEl();c.innerHTML=b.title,d.innerHTML=b.content},view.updateTitleAndContent=function(a){view.updateTitle(a.title),view.updateContent(a.content)},view.updateTitle=function(a){var b=helpers.getPageTitleEl();b.innerHTML=a},view.updateContent=function(a){var b=helpers.getPageContentEl();b.innerHTML=a},view.clearContent=function(){var a=helpers.getPageTitleEl(),b=helpers.getPageContentEl();a.innerHTML="",b.innerHTML=""},view.createMainMenu=function(){for(var a=model.getPages(),b=document.createDocumentFragment(),c=helpers.getMainMenuEl(),d=0,e=a.length;d<e;d++)b.appendChild(helpers.createMenuItem(a[d]));c.appendChild(b)},view.createPostMarkup=function(a){var b=document.createElement("article"),c=document.createElement("h3"),d=helpers.createLink(a),e=document.createElement("div");return c.appendChild(d),e.appendChild(document.createTextNode(a.content)),b.appendChild(c),b.appendChild(e),b};var editor={};editor.currentContent="",editor.unSavedContent=!1,editor.init=function(){editor.listenEditorToggle(),editor.checkEditorHidden()},editor.updateContent=function(){event.preventDefault(),model.updateContent(editor.currentContent),editor.unSavedContent=!1,editor.animateSaveBtn()},editor.updateTitle=function(){var a=helpers.getEditorTitleEl().value;editor.currentContent.title=a,editor.unSavedContent=!0,view.updateTitle(a)},editor.updateMainContent=function(){var a=helpers.getEditorContentEl().value;editor.currentContent.content=a,editor.unSavedContent=!0,view.updateContent(a)},editor.loadEditForm=function(a){var b=helpers.getEditorTitleEl(),c=helpers.getEditorContentEl();b.value=a.title,c.value=a.content,"blog"===a.slug?c.setAttribute("readonly","readonly"):c.removeAttribute("readonly"),editor.addFormListeners()},editor.animateSaveBtn=function(){var a=helpers.getEditorUpdateBtnEl(),b=function(){setTimeout(function(){a.innerText="Update"},1e3)};saving=function(){setTimeout(function(){a.innerText="Saved!",b()},900)},a.innerText="Saving...",saving()},editor.addFormListeners=function(){var a=helpers.getEditorTitleEl(),b=helpers.getEditorContentEl(),c=helpers.getEditorUpdateBtnEl(),d=helpers.getLinks();a.addEventListener("input",editor.updateTitle,!1),b.addEventListener("input",editor.updateMainContent,!1),c.addEventListener("click",editor.updateContent,!1),d.forEach(function(a){a.addEventListener("click",editor.protectUnsavedContent,!1)})},editor.protectUnsavedContent=function(){if(!0===editor.unSavedContent){var a=window.confirm("You have unsaved content");!1===a?event.preventDefault():editor.unSavedContent=!1}},editor.listenEditorToggle=function(){var a=helpers.getEditorToggleLink();a.addEventListener("click",function(){editor.toggle(),event.preventDefault()},!1)},editor.checkEditorHidden=function(){var a=model.getEditorHidden();!1===a&&editor.toggle()},editor.toggle=function(){var a=helpers.getEditorEl(),b=helpers.getEditorToggleEl(),c=helpers.getLinks();editor.currentContent=model.getCurrentContent(),a.classList.toggle("hidden"),b.classList.toggle("hidden"),!1===b.classList.contains("hidden")?(editor.loadEditForm(editor.currentContent),model.updateEditorHidden(!1)):(model.updateEditorHidden(!0),c.forEach(function(a){a.removeEventListener("click",editor.protectUnsavedContent,!1)}))};var vanillaPress={};vanillaPress.init=function(){model.init(),router.init(),view.init(),editor.init(),console.log("Hi, still there?!")},vanillaPress.init();